name: "build-bigflow"
description: "Automating build after code changes"
author: chi

inputs:
  bf_start_time: 
    description: "The date that metrics should be calculated for"      
    required: true
    default: "NOW"
  bf_workflow_id: 
    description: "Workflow that should be run"    
    required: true
    default: "ALL"

runs:
  using: "composite"
  steps:
#     - run: virtualenv -p python3.7 buildenv
#       shell: bash

#     - run: source buildenv/bin/activate
#       shell: bash

    - run: pip install -r resources/requirements.txt
      shell: bash

    - run: echo bf build --start-time ${{inputs.bf_start_time}} --workflow ${{inputs.bf_workflow_id}}
      shell: bash
      
    - run: bf build --start-time ${{inputs.bf_start_time}} --workflow ${{inputs.bf_workflow_id}}
      shell: bash
      
#     - run: rm -r buildenv
#       shell: bash

branding:
  icon: refresh-cw
  color: green
